WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'browser-metrics-aa-beacon/impl.js' */
!function(e,r){"use strict";const t=e=>"number"==typeof e;const n=e=>"string"==typeof e,a=e=>""+Math.floor(e);const o=(e,r)=>{Object.keys(e).forEach((t=>{r(t,e[t])}))};function s(e){return Object.keys(e).length}class i{constructor(){this.children={},this.values=[]}add(e,r){0==e.length?this.values.push(r):(this.children.hasOwnProperty(e[0])||(this.children[e[0]]=new i),this.children[e[0]].add(e.substr(1),r))}toTrieObject(){let e={};return o(this.children,((r,t)=>{e[r]=t.toTrieObject()})),0===this.values.length?e:0===s(this.children)?this.values:[e,this.values]}condensed(){let e=new i;return e.values=this.values.concat(),o(this.children,((r,t)=>{let n=t.condensed();0===n.values.length&&1===s(n.children)?o(n.children,((t,n)=>{e.children[r+t]=n})):e.children[r]=n})),e}}const d={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5};function u(e){return(e=Math.floor(e||0))>0?e.toString(36):""}let l="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");r.addReportMarshaller((e=>{var r={};return Object.keys(e).forEach((a=>{var o=e[a];(t(o)||(e=>"boolean"==typeof e)(o)||n(o)||null===o)&&(r[a]=o)})),r})),r.addReportMarshaller((e=>({elementTimings:JSON.stringify(e.elementTimings)}))),r.addReportMarshaller((e=>{if(function(e){return t(e.apdex)}(e))return{apdex:""+e.apdex}})),r.addReportMarshaller((e=>{if(function(e){return t(e.firstPaint)}(e))return{firstPaint:a(e.firstPaint)}})),r.addReportMarshaller((e=>{if(function(e){return"boolean"==typeof e.isInitial}(e))return{isInitial:""+e.isInitial}})),r.addReportMarshaller((e=>{if(function(e){return n(e.journeyId)}(e))return{journeyId:e.journeyId}})),r.addReportMarshaller((e=>{if(function(e){return n(e.key)}(e))return{key:e.key}})),r.addReportMarshaller((e=>{if(function(e){return t(e.navigationType)}(e))return{navigationType:""+e.navigationType}})),r.addReportMarshaller((e=>{if(function(e){return t(e.readyForUser)}(e))return{readyForUser:a(e.readyForUser)}})),r.addReportMarshaller((e=>{if(function(e){return t(e.redirectCount)}(e))return{redirectCount:""+e.redirectCount}})),r.addReportMarshaller((e=>{if(function(e){return t(e.resourceLoadedEnd)}(e))return{resourceLoadedEnd:a(e.resourceLoadedEnd)}})),r.addReportMarshaller((e=>{if(function(e){return Array.isArray(e.resourceTiming)}(e)){let t=new i;return e.resourceTiming.forEach((e=>{let n=r.cleanUrl(e.name);t.add(n||"☠",function(e){return[d[e.initiatorType]||-1,u(e.startTime),u(e.responseEnd),u(e.responseStart),u(e.requestStart),u(e.connectEnd),u(e.secureConnectionStart),u(e.connectStart),u(e.domainLookupEnd),u(e.domainLookupStart),u(e.redirectEnd),u(e.redirectStart)].join(",").replace(/,+$/,"")}(e))})),{resourceTiming:JSON.stringify(t.condensed().toTrieObject())}}})),r.addReportMarshaller((e=>{if(function(e){return t(e.threshold)}(e))return{threshold:a(e.threshold)}})),r.addReportMarshaller((e=>{let r={};return l.forEach((n=>{t(e[n])&&(r[n]=a(e[n]))})),r})),r.addReportMarshaller((e=>{if(function(e){return n(e.userAgent)}(e))return{userAgent:e.userAgent}})),r.addReportMarshaller((e=>{if(function(e){return"object"==typeof e.marks}(e)){let r={},t={marks:{},measures:{}};return e.marks.forEach((e=>{t.marks[e.name]=t.marks[e.name]||[],t.marks[e.name].push(Math.floor(e.time))})),o(t.marks,((e,t)=>{r["mark."+e]=JSON.stringify(t)})),e.measures.forEach((e=>{t.measures[e.name]=t.measures[e.name]||[],t.measures[e.name].push([Math.floor(e.startTime),Math.floor(e.duration)])})),o(t.measures,((e,t)=>{r["measure."+e]=JSON.stringify(t)})),r.userTimingRaw=JSON.stringify({marks:t.marks,measures:t.measures}),r}}));e.subscribe((e=>{r.beacon(e.report)}))}(window["browser-metrics"],window["browser-metrics-aa-beacon"]);

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'impl.js' */
!function(e,t){"use strict";let n=window;var r;try{r=n.require("jquery")}catch(e){r=n.jQuery}var i=r;const o=/^(?:https?:)?\/\/[^\.]+\.cloudfront\.net\/p\/([^\/]+)\/main\.js$/,a=/^(?:https?:)?\/\/aes-artifacts--cdn\.[^\.]+\.atlassian\.io\/hashed\/([^\/]+)\/.+\.js$/;const s=function(){let e=i.Deferred();return i((function(){let t=[];Array.prototype.slice.call(n.document.getElementsByTagName("script")||[]).forEach((e=>{let n=e.getAttribute("src"),r=n&&(n.match(a)||n.match(o));if(r&&r.length>1){let n=r[1];t.push({name:n,async:e.async})}})),e.resolve(t)})),e.promise()}().then((e=>({experiments:e})));let c=function(){return s};const u=e=>{if(function(e){return Array.isArray(e.experiments)}(e))return{experiments:JSON.stringify(e.experiments.map((e=>[e.name,e.async?1:0])))}},d=["android","applewebkit","baiduspider","bingbot","build","chrome","compatible","edge","electron","explorer","firefox","gecko","googlebot","iemobile","intel","ipad","iphone","khtml","konqueror","like","linux","mac","macintosh","maxthon","microsoft","mini","mobi","mobile","mozilla","msie","mwendo","nt","opera","opr","os","phone","playstation","presto","rv","safari","samsung","thunderbird","trident","ubuntu","ucbrowser","unix","version","vivo","win","win64","windows","wow64","x","x11","x64","x86","x86_64","xbox"];function f(e){const t=e.toLowerCase().replace(/[;,()+]/g,"");return function(e){return!!e.match(/^[0-9.,_%\-]+$/)}(t)||-1!==d.indexOf(t)?e:""}function l(e){const t=/[\s\/:]/g,n=e.match(t);return null===n?f(e):e.split(t).map(f).reduce(((e,t)=>e+n.shift()+t))}const m=e=>{if(e.userAgent)return{userAgent:l(e.userAgent)}};let p=/^(true|false|\d+)$/gi,v=/([&?][^&=]+)(=?)([^&#]*)/g,y=e=>e.replace(v,((e,t,n,r)=>t+n+((e=>!!e.match(p))(r)?r:"☠"))),h=/(\/s\/).+(\/_\/)/;const g=/^https:\/\/[^.]+\.cloudfront.net\/[^/]+(\/wiki)?\/s\//g,b=e=>e.match(g)?e=(e=>e.replace(h,((e,t,n)=>t+"☠"+n)))(e=y(e)):"",w=/^https:\/\/d2kryfvs3op226\.cloudfront\.net\/[a-f0-9]+\.[a-z]+$/g,E=e=>e.match(w)?e:"",x=/^https:\/\/[^\/]+\.atl-paas.net\//g,T=e=>e.match(x)?e:""
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */;function S(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function P(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}var I=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},k=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},L="function"==typeof WeakSet?new WeakSet:new Set,O=function(e,t,n){var r;return function(){t.value>=0&&(n||L.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},M=-1,B=function(){return"hidden"===document.visibilityState?0:1/0},C=function(){var e,t,n;e=function(e){var t=e.timeStamp;M=t},t=!0,n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))},addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},j=function(){return M<0&&(M=B(),C(),k((function(){setTimeout((function(){M=B(),C()}),0)}))),{get firstHiddenTime(){return M}}};const A=(e,t,n,r=(()=>!1))=>{let i=null;return o=>(i=i||new Promise((e=>{t((t=>{e(t)}))})),r(o)?Promise.reject():i.then((t=>({[e]:n(t)}))))};function F(e){var t;return null===(t=null===PerformanceObserver||void 0===PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes)||void 0===t?void 0:t.includes(e)}const q=A("fcp",(function(e,t){var n,r=j(),i=I("FCP"),o=function(e){"first-contentful-paint"===e.name&&(s&&s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),L.add(i),n()))},a=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=a?null:function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}}("paint",o);(a||s)&&(n=O(e,i,t),a&&o(a),k((function(r){i=I("FCP"),n=O(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,L.add(i),n()}))}))})))}),(e=>e.value),(e=>{const t=["hidden","mixed"].includes(e.observations.pageVisibility),n=!e.isInitial;return!F("paint")||t||n})),$=A("ttfb",(function(e){var t,n=I("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();if(n.value=n.delta=t.responseStart,n.value<0)return;n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t)}),(e=>e.value),(e=>!e.isInitial));function R(e){return{readyForUser:e.end-e.start}}function V(e,t){return new Promise((function(n){var r;function i(){var t=e();void 0!==t&&(clearInterval(r),n(t))}r=setInterval(i,t),i()}))}const U=()=>window;var N=window;const D=()=>U().performance;function z(){const e=U().chrome;return e&&e.loadTimes}function _(){return void 0!==D().timing.msFirstPaint}function H(){const e=U().chrome,t=D().timing;return z()&&e.loadTimes().firstPaintTime>0?1e3*e.loadTimes().firstPaintTime-t.navigationStart:_()&&t.msFirstPaint>0?t.msFirstPaint-t.navigationStart:void 0}var J="browser-metrics-journey";function W(){const e=U();return e.performance&&e.performance.navigation&&e.performance.timing&&void 0!==e.performance.timing.navigationStart}function Q(e){return"function"==typeof e}function G(){}function K(){const e=D();return e&&Q(e.getEntriesByType)}var X=[];function Y(){return D().getEntriesByType("resource").filter((function(e){return"img"!==e.initiatorType}))}function Z(){const e=D();Q(e.clearResourceTimings)&&(X=Y(),e.clearResourceTimings())}function ee(){return K()?X.concat(Y()):[]}Z(),function(e){const t=D();var n=t.onresourcetimingbufferfull||G;Q(t.addEventListener)?t.addEventListener("resourcetimingbufferfull",e):t.onresourcetimingbufferfull=function(){e(),n()}}(Z);var te,ne="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");function re(){const e=D().timing;var t=e.loadEventEnd>0,n={};if(t)return ne.forEach((function(t){var r=e[t];r>0&&(n[t]=r-e.navigationStart)})),n}function ie(){return W()?(void 0===te&&(te=V(re,250)),te):Promise.reject("The navigation timing API is required to produce a report for this transition.")}function oe(){var e=N.document.querySelectorAll("script[src][async]");return Array.prototype.map.call(e,(function(e){return function(e){var t=N.document.createElement("a");return t.href=e,t.href}(e.src)}))}function ae(){var e=oe();return ie().then((function(t){return ee().filter((function(e){return"link"===e.initiatorType||"script"===e.initiatorType})).filter((function(e){return e.responseEnd<t.domContentLoadedEventStart})).filter((function(t){return"script"!==t.initiatorType||-1===e.indexOf(t.name)}))}))}var se="duration,initiatorType,name".split(","),ce="startTime,connectEnd,connectStart,domainLookupEnd,domainLookupStart,fetchStart,redirectEnd,redirectStart,requestStart,responseEnd,responseStart,secureConnectionStart".split(",");function ue(e,t,n){void 0!==n&&(e[t]=n)}const de=[q,$,function({observations:e}){return void 0===e.pageVisibility?{}:{pageVisibility:e.pageVisibility}},function({entityId:e}){return e?{entityId:e}:{}},function(e){return{key:e.key}},function(e){return{isInitial:e.isInitial}},function(e){return{threshold:e.threshold}},function(e){const t={},n=function(e,t){try{if(F(e)){const n=new PerformanceObserver((e=>e.getEntries().map(t)));return n.observe({type:e,buffered:!0}),n}}catch(e){console.debug("[BM]","observePerformance",e)}}("element",(({startTime:n,identifier:r})=>{let i=n>=e.start&&n<=e.extendedEnd?n:void 0;t.hasOwnProperty(r)?t[r]<i&&(t[r]=i):i&&(t[r]=i)}));return new Promise((e=>{setTimeout((()=>{e({elementTimings:t}),null==n||n.disconnect()}),250)}))},function(){const{deviceMemory:e,hardwareConcurrency:t}=window.navigator,n={};return ue(n,"userDeviceMemory",e),ue(n,"userDeviceProcessors",t),n},function(e){var t=R(e),n=e.threshold,r=4*e.threshold;return{apdex:t.readyForUser<=n?1:t.readyForUser<=r?.5:0}},function(e){if(D())return e.isInitial?(U().top===U().self&&(z()||_())?V(H,250):Promise.reject("The browser does not have a first paint metric")).then((function(e){return{firstPaint:e}}),(function(){return{}})):{}},function(){const e=U();return void 0===e.sessionStorage?Promise.reject("sessionStorage is required to produce a report for this transition."):(null===e.sessionStorage.getItem(J)&&e.sessionStorage.setItem(J,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*U().Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))),Promise.resolve({journeyId:e.sessionStorage.getItem(J)}))},function(e){var t={};const n=U();return e.isInitial&&W()&&(t.navigationType=n.performance.navigation.type),t},R,function(e){var t={};const n=U();if(e.isInitial){if(!W())return Promise.reject("The navigation timing API is required to produce a report for this transition.");void 0!==n.performance.navigation.redirectCount&&(t.redirectCount=n.performance.navigation.redirectCount)}return Promise.resolve(t)},function(e){return e.isInitial?ae().then((function(e){return 0===e.length?{resourceLoadedEnd:null}:{resourceLoadedEnd:e.map((function(e){return e.responseEnd})).reduce((function(e,t){return Math.max(e,t)}))}})):{}},function(e){return e.isInitial?ae().then((function(e){if(0===e.length)return{resourceLoadedStart:null};var t=e.map((function(e){return e.startTime}));return{resourceLoadedStart:Math.min.apply(Math,t)}})):{}},function(e){return K()?{resourceTiming:ee().filter((function(t){var n=t.responseEnd;return n>=e.start&&n<=e.extendedEnd&&t.startTime>=e.start})).map((function(t){var n={};return se.forEach((function(e){n[e]=t[e]})),ce.forEach((function(r){n[r]=t[r]>0?t[r]-e.start:0})),n}))}:{}},function(e){return e.isInitial?ie():{}},function(){return{userAgent:U().navigator.userAgent}},function(e){const t=D();if(!t||!Q(t.getEntriesByType))return{};var n=t.getEntriesByType("mark").filter((function(t){return t.startTime>=e.start&&t.startTime<=e.extendedEnd})),r=t.getEntriesByType("measure").filter((function(t){return t.startTime>=e.start&&t.startTime+t.duration<=e.extendedEnd}));return{marks:n.map((function(t){return{name:t.name,time:t.startTime-e.start}})),measures:r.map((function(t){return{name:t.name,startTime:t.startTime-e.start,duration:t.duration}}))}}];var fe=Object.prototype.hasOwnProperty;function le(){for(var e,t,n={},r=0,i=arguments.length;r<i;r++)for(t in e=arguments[r])fe.call(e,t)&&(n[t]=e[t]);return n}function me(e){return(t=e,Promise.all([t]).then((function(e){return e[0]}))).then(null,(function(){return{}}));var t}function pe(e){var t=e.reporters,n=de.concat().concat(t).map((function(t){var n;try{n=t(e)}catch(e){!function(e){const t=U();(t.console.error||t.console.log).call(t.console,e.stack||e)}(e),n={}}return me(n)}));return Promise.all(n).then((function(e){return le.apply(void 0,e)}))}const ve=()=>window.document,ye=()=>{let e=ve().visibilityState;const t=(n=()=>{e="mixed"},document.addEventListener("visibilitychange",n),window.addEventListener("pagehide",n),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("pagehide",n)});var n;return()=>(t(),e)};function he(e){return new Promise((t=>setTimeout((()=>t(null)),e)))}function ge(e,t,n){let r;const i=new Promise((n=>{const i=new Set;let o=0;r=new PerformanceObserver((function(r,a){r.getEntries().map((e=>({name:e.name,startTime:e.startTime}))).filter((n=>e.includes(n.name)&&n.startTime>=t.start)).forEach((e=>{o=Math.max(o,e.startTime),i.add(e.name)})),i.size===e.length&&n(o)})),r.observe({type:"mark",buffered:!0})}));return Promise.race([i,n]).then((()=>{r.disconnect()})),i}const be=()=>{const e={};return{startTransition:(t,n)=>{if(void 0!==e[t])return console.log("[BM]",`Transition key: "${t}" is already in use.`),!1;console.debug("[BM]",t,"Collector.startTransition",n);const{isInitial:r=!1,threshold:i,reporters:o,timestamp:a,entityId:s,waitForMarks:c,timeout:u}=n,d={pageVisibility:ye()};return e[t]={isInitial:r,start:a,key:t,threshold:i,reporters:o,entityId:s,observers:d,waitForMarks:c,timeout:u},!0},endTransition:(t,n)=>P(void 0,void 0,void 0,(function*(){var r;const i=e[t];if(void 0===i)throw new Error(`Transition with key: ${t} does not exist in the registry`);console.debug("[BM]",t,"Collector.endTransition",n),delete e[t];const{observers:o,waitForMarks:a,timeout:s}=i,c=S(i,["observers","waitForMarks","timeout"]),u=s-(n.timestamp-i.start);!function(e,t){e.entityId&&t.entityId&&console.debug("[BM]",`entityId "${e.entityId}" provided in start() was overridden by "${t.entityId}" provided in end()`)}(i,n);const d=Object.assign(Object.assign({},c),{observations:{pageVisibility:o.pageVisibility()},end:n.timestamp,extendedEnd:n.timestamp,entityId:null!==(r=n.entityId)&&void 0!==r?r:c.entityId});if(!a||a.length<=0||u<=0)return d;if(void 0===window.PerformanceObserverEntryList||void 0===window.PerformanceObserverEntryList.prototype.getEntries){const e=u/2;return he(e).then((()=>(d.extendedEnd=d.end+e,d)))}const f=he(u);return Promise.race([f,ge(a,i,f)]).then((e=>(d.extendedEnd=null!=e?e:d.end+u,d)))}))}};function we(){const e=[],t=[],n=be();function r(e){return t.push(e),console.debug("[BM]",e.key,"Report stored"),e}function i(t){return e.forEach((function(e){e({report:t})})),console.debug("[BM]",t.key,"Subscribers notified"),t}function o(e){!function(e){de.push(e)}(e)}function a(n){!function(e){t.forEach((function(t){e({report:t})}))}(n),e.push(n)}return function(e){e.start?function(e){var{key:t}=e,r=S(e,["key"]);n.startTransition(t,r)}(e.start):e.end?function(e){var{key:t}=e,o=S(e,["key"]);n.endTransition(t,o).then(pe).then(r).then(i).catch((e=>{console.log("[BM]",e.message)}))}(e.end):e.addReporter?o(e.addReporter):e.subscribe&&a(e.subscribe)}}var Ee=N["browser-metrics"];function xe(){if(D()){console.log("[BM]","Collector installed");const e=we();Ee.delegateTo(e)}}n.define&&n.define("internal/browser-metrics-plugin/collector",(()=>({install:xe}))),n["browser-metrics-plugin"].install((function(n){e.addReporter(c),t.addReportMarshaller(u),t.addReportMarshaller(m),t.addUrlCleaner(b),t.addUrlCleaner(E),t.addUrlCleaner(T),n()}))}(window["browser-metrics"],window["browser-metrics-aa-beacon"]);

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:contrib', location = 'contrib.js' */
window["browser-metrics-plugin"].install(function(e){require(["internal/browser-metrics","internal/browser-metrics-aa-beacon","jquery"],function(r,n,t){var i,o={},a={},s={},u={},c={},d={},f={},p={},l={},m={},b={},v={},R={},w={},y={};o=function(e){e.window=(0,eval)("window");return e}(o),a=function(e,r){function n(){if(!t){var e="com.atlassian.jira.plugins.jira-browser-metrics:contrib.scm-commit-id",n=r.window.WRM.data.claim(e);t=n?{applicationHash:n}:{}}return t}e.applicationHashReporter=n;var t;return e}(a,o),s=function(e){function r(e){return"string"==typeof e.applicationHash}function n(e){if(r(e))return{applicationHash:e.applicationHash}}return e.applicationHashReportMarshaller=n,e}(s),u=function(e,r){function n(e){return e.isInitial?t.promise():{}}e.applicationVersionReporter=n;var t=r.Deferred();return r(function(){var e={},n=r("meta[name=application-name]").data("version");n&&(e.applicationHash=n),t.resolve(e)}),e}(u,t),c=function(e){function r(e){return"string"==typeof e.applicationVersion}function n(e){if(r(e))return{applicationVersion:e.applicationVersion}}return e.applicationVersionReportMarshaller=n,e}(c),d=function(e,r){function n(e){return""+Number(e)===e}function t(e){return e.isInitial?i.promise():{}}e.serverDurationReporter=t;var i=r.Deferred();return r(function(){var e={},t=r("#jira_request_timing_info").find("[title=jira\\.request\\.server\\.time]").val();t&&n(t)&&(e.serverDuration=Number(t));var o=r("#jira_request_timing_info").find("[title=jira\\.request\\.server\\.head\\.time]").val();o&&n(o)&&(e.serverHeadDuration=Number(o)),i.resolve(e)}),e}(d,t),f=function(e){function r(e){return"number"==typeof e.serverDuration}function n(e){if(r(e))return{serverDuration:""+e.serverDuration,serverHeadDuration:""+e.serverHeadDuration}}return e.serverDurationReportMarshaller=n,e}(f),p=function(e,r){function n(e){return e&&e.__esModule?e:{"default":e}}function t(e){return o.promise()}e.networkConnectionReporter=t;var i=n(r),o=i["default"].Deferred();return(0,i["default"])(function(){var e={},r=window.navigator.connection;r&&(e.effectiveType=r.effectiveType,e.downlink=Number(r.downlink),e.rtt=Number(r.rtt)),o.resolve(e)}),e}(p,t),l=function(e){function r(e){return"undefined"!=typeof e.effectiveType&&"number"==typeof e.downlink&&"number"==typeof e.rtt}function n(e){if(r(e))return{connectionEffectiveType:e.effectiveType,connectionDownlink:e.downlink,connectionRTT:e.rtt}}return e.networkConnectionReportMarshaller=n,e}(l),m=function(e,r){function n(e){return""+Number(e)===e}function t(e){return e.isInitial?i.promise():{}}e.databaseDurationReporter=t;var i=r.Deferred();return r(function(){var e={},t="#jira_request_timing_info",o=r(t).find("[title=db\\.reads\\.time\\.in\\.ms]").val(),a=r(t).find("[title=db\\.conns\\.time\\.in\\.ms]").val(),s=r(t).find("[title=db\\.reads\\.count]").val(),u=r(t).find("[title=head\\.db\\.reads\\.count]").val();o&&n(o)&&(e.dbReadsTimeInMs=Number(o)),a&&n(a)&&(e.dbConnsTimeInMs=Number(a)),s&&n(s)&&(e.dbReadsCount=Number(s)),u&&n(u)&&(e.dbReadsHeadCount=Number(u)),i.resolve(e)}),e}(m,t),b=function(e){function r(e){return"number"==typeof e.dbReadsTimeInMs||"number"==typeof e.dbConnsTimeInMs||"number"==typeof e.dbReadsCount||"number"==typeof e.dbReadsHeadCount}function n(e){if(r(e)){var n={dbReadsTimeInMs:""+(e.dbReadsTimeInMs||""),dbConnsTimeInMs:""+(e.dbConnsTimeInMs||"")};return e.dbReadsCount&&(n.dbReadsCount=e.dbReadsCount),e.dbReadsHeadCount&&(n.dbReadsHeadCount=e.dbReadsHeadCount),n}}return e.databaseDurationReportMarshaller=n,e}(b),v=function(e,r){function n(e){if(e.isInitial){var n=r.window.WRM.data.claim(t),i=n?{correlationId:n}:{};return i}return{}}e.correlationIdReporter=n;var t="jira.request.correlation-id";return e}(v,o),R=function(e){function r(e){return"string"==typeof e.correlationId}function n(e){if(r(e))return{correlationId:e.correlationId}}return e.correlationIdReportMarshaller=n,e}(R),w=function(e,r){function n(e){var n={};if(r.window.performance&&r.window.performance.getEntriesByName&&e.isInitial){var t=r.window.performance.getEntriesByName("mark_fully_visible"),i=r.window.performance.getEntriesByName("mark_fully_loaded");if(t&&t.length>0&&i&&i.length>0){var o=t[0].startTime;n.deferScriptsStart=o;var a=i[0].startTime;n.deferScriptsEnd=a;var s=0,u=r.window.performance.getEntriesByName("defer_scripts_clicks");u&&u.forEach(function(e){var r=e.startTime;r>=o&&r<=a&&s++}),n.deferScriptsClicks=s;var c=0,d=r.window.performance.getEntriesByName("defer_scripts_keydowns");d&&d.forEach(function(e){var r=e.startTime;r>=o&&r<=a&&c++}),n.deferScriptsKeydowns=c}}return n}return e.deferScriptsReporter=n,e}(w,o),y=function(e){function r(e){var r={};return"number"==typeof e.deferScriptsStart&&(r.deferScriptsStart=Math.floor(e.deferScriptsStart)),"number"==typeof e.deferScriptsEnd&&(r.deferScriptsEnd=Math.floor(e.deferScriptsEnd)),"number"==typeof e.deferScriptsClicks&&(r.deferScriptsClicks=Math.floor(e.deferScriptsClicks)),"number"==typeof e.deferScriptsKeydowns&&(r.deferScriptsKeydowns=Math.floor(e.deferScriptsKeydowns)),r}return e.deferScriptsMarshaller=r,e}(y),i=function(e,r,n,t,i,o,a,s,u,c,d,f,p,l,m,b){var v=m.addReporter,R=b.addReportMarshaller;v(e.applicationHashReporter),v(n.applicationVersionReporter),v(u.databaseDurationReporter),v(i.serverDurationReporter),v(a.networkConnectionReporter),v(d.correlationIdReporter),v(p.deferScriptsReporter),R(r.applicationHashReportMarshaller),R(t.applicationVersionReportMarshaller),R(c.databaseDurationReportMarshaller),R(o.serverDurationReportMarshaller),R(s.networkConnectionReportMarshaller),R(f.correlationIdReportMarshaller),R(l.deferScriptsMarshaller),m.subscribe(function(e){var r=document.getElementById("browser-metrics-report");null==r&&(r=document.createElement("div"),r.id="browser-metrics-report",r.style.display="none",document.body.appendChild(r)),r.textContent=JSON.stringify(e)})}(a,s,u,c,d,f,p,l,m,b,v,R,w,y,r,n),e()})});
}catch(e){WRMCB(e)};